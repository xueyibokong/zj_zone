var hasProp={}.hasOwnProperty;console.log("def:debug_depinfo"),define(["cbui_api","@/../../debug/titlebar_menu","cbui_dependency"],function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;return g=a.CONST,g.IE_FLAG?void 0:(d=a.$,h=a._,k="map",f=d("#dependencyInfo"),0===f.length&&(f=d('<div style="position:absolute;bottom:0;z-index:9999;background:#eeeeee;opacity:0.8;text-align:right">\n  <input data-action="map" type="button" value="拓扑图"/>\n  <input data-action="matrix" type="button" value="邻接矩阵"/>\n  <input data-action="close" type="button" value="X"/>\n  <div><canvas></canvas></div>\' +\n</div>'),d(document.body).append(f),f.hide()),e=f.find("canvas"),i=e[0],j=i.getContext("2d"),f.find("input").on("click",function(a){var b,c;switch(b=d(a.currentTarget),c=b.attr("data-action"),c){case"map":case"matrix":return k=c,q(o.map,o.order);case"close":return f.hide()}}),l=void 0,m=void 0,u=0,v=0,e.on("mousemove",function(a){var b;1===a.which&&(b=w(i,a.clientX,a.clientY),u=l+b.x,v=m+b.y,j.setTransform(1,0,0,1,u,v),q(o.map,o.order))}),e.on("mousedown",function(a){var b;b=w(i,a.clientX,a.clientY),l=u-b.x,m=v-b.y}),w=function(a,b,c){var d;return d=a.getBoundingClientRect(),{x:b-d.left*(a.width/d.width),y:c-d.top*(a.height/d.height)}},p={},t=function(a,b,c){p[a]={x:b,y:c}},n=function(a){return p[a]||{x:0,y:0}},o={},q=function(a,b){switch(o.map=a,o.order=b,j.save(),j.setTransform(1,0,0,1,0,0),j.clearRect(0,0,i.width,i.height),j.restore(),k){case"map":return r(a,b);case"matrix":return s(a,b)}},r=function(a,b){var d,e,f,g,i,k,l,m,o,p,q,r;for(console.log(b),j.font="8px",d=i=0,o=b.length;o>=0?o>i:i>o;d=o>=0?++i:--i)for(g=k=0,p=b[d].length;p>=0?p>k:k>p;g=p>=0?++k:--k)if(q=80*d+30,r=40*g+30,j.fillStyle="black",j.fillText(b[d][g],q+5,r-5),j.beginPath(),j.fillStyle=c.isEnable(b[d][g])?"green":"red",j.arc(q,r,5,0,2*Math.PI,!1),j.fill(),j.beginPath(),j.fillStyle=c.isReady(b[d][g])?"green":"red",j.arc(q,r+10,3,0,2*Math.PI,!1),j.fill(),t(b[d][g],q,r),e=a[b[d][g]].i,!h.isUndefined(e))for(m=0,l=e.length;l>m;m++)f=e[m],f=n(f),j.beginPath(),j.moveTo(q,r),j.lineTo(f.x,f.y),j.stroke()},s=function(a,b){var c,d,e,f,g,i,k,l,m,n,o,p,q,r,s;if(j.fillStyle="black",c=h.flatten(b),n=20,o=30,null===c){c=[];for(e in a)hasProp.call(a,e)&&(q=a[e],c.push(e),f=q.i,h.isUndefined(f)||(c=c.concat(f)));c=h.uniq(c).sort()}for(m=c.length,d=i=0,p=m;p>=0?p>i:i>p;d=p>=0?++i:--i)r=n+80*(d+1),s=o,j.fillText(c[d],r,s),r=n,s=o+20*(d+1),j.fillText(c[d],r,s);for(e in a)if(hasProp.call(a,e)&&(q=a[e],r=h.indexOf(c,e),f=q.i,!h.isUndefined(f)))for(k=0,l=f.length;l>k;k++)g=f[k],s=h.indexOf(c,g),j.fillText("1",n+80*(r+1),o+20*(s+1))},c.afterCalc=function(a,b){i.width=d(window).innerWidth(),i.height=d(window).innerHeight()/2,j=i.getContext("2d"),j.transform(1,0,0,1,u,v),q(a,b)},b.addMenu({id:"showDepInfo",title:"DI",callback:function(){"none"===f.css("display")?f.show():f.hide()}}))});