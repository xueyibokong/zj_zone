console.log("def:component_codeMirror"),define(["cbui_core","libex/codemirror/lib/codemirror","libex/codemirror/addon/search/jump-to-line","libex/codemirror/addon/scroll/annotatescrollbar","libex/codemirror/mode/meta","css!libex/codemirror/lib/codemirror.css"],function(a,b){var c,d,e;return e=a.Fn,c=e.$,d=a.Component,d.CodeMirror=d.Base.extend({initialize:function(a){var d,e,f,g,h,i,j,k;this._super(a),f=this.el,d=this.$el,j={lineNumbers:"false"!==d.attr("data-line-numbers")},k=d.is("[data-search]"),k&&(j.extraKeys=_.defaults({},j.extraKeys,{"Alt-F":"findPersistent"}),require(["css!libex/codemirror/addon/dialog/dialog.css","libex/codemirror/addon/search/search"],function(){})),e=this.cm=b.fromTextArea(f,j),c(e.display.wrapper).css("height",d.height()),h=d.is("[data-match-highlighter]"),require(["libex/codemirror/addon/search/match-highlighter"],function(){e.setOption("highlightSelectionMatches",{showToken:/\w/,annotateScrollbar:!0})}),i=d.attr("data-mode"),i&&this.setMode(i),g=d.attr("data-hint"),g&&this.setHint(g)},setMode:function(a){var b;b=this.cm,a?require(["libex/codemirror/mode/"+a+"/"+a],function(){b.setOption("mode",a)}):b.setOption("mode",null)},setHint:function(a){var c,d,e,f;c=this.cm,d=function(a,c){return(!c||c())&&setTimeout(function(){return a.state.completionActive?void 0:a.showHint({completeSingle:!1})},100),b.Pass},e=function(a){return d(a,function(){var c;return c=a.getCursor(),"<"===a.getRange(b.Pos(c.line,c.ch-1),c)})},f=function(a){return d(a,function(){var c,d;return d=a.getTokenAt(a.getCursor()),"string"!==d.type||/['"]/.test(d.string.charAt(d.string.length-1))&&1!==d.string.length?(c=b.innerMode(a.getMode(),d.state).state,c.tagName):!1})},require(["css!libex/codemirror/addon/hint/show-hint.css","libex/codemirror/addon/hint/show-hint","libex/codemirror/addon/hint/anyword-hint","libex/codemirror/addon/hint/"+a+"-hint"],function(){c.addKeyMap({"Alt-/":"autocomplete","'<'":d,"'/'":e,"' '":f,"'='":f})})},clearHistory:function(){this.cm.doc.clearHistory()},setValue:function(a,c){var d,e;c&&(c.mode?this.setMode(c.mode):c.fileName&&(d=null!=(e=b.findModeByFileName(c.fileName))?e.mode:void 0,this.setMode(d))),this.cm.setValue(a),this.cm.clearHistory()},getValue:function(){return this.cm.getValue()},getSize:function(){return this.cm.doc.size}})});